# Быстрое руководство по тестированию скриптов деплоя

## Самый безопасный способ - автоматическое тестирование

```bash
# Базовое тестирование (проверка синтаксиса и структуры)
make test-deploy

# Полное тестирование (включая проверку функций)
make test-deploy-full
```

## Пошаговое тестирование

### Шаг 1: Автоматическая проверка (1 минута)

```bash
make test-deploy
```

Это проверит:
- ✓ Синтаксис всех скриптов
- ✓ Наличие всех файлов
- ✓ Права на выполнение
- ✓ Структуру проекта

**Безопасно:** Никаких изменений не делается.

### Шаг 2: Dry-run режим (2 минуты)

```bash
make deploy-safe-dry
```

Это покажет, что будет сделано при реальном деплое, **без изменений**.

**Безопасно:** Никаких изменений не делается.

### Шаг 3: Тест отдельных компонентов (5 минут)

```bash
# Тест бэкапа (создаст реальный бэкап, но это безопасно)
./scripts/backup_db.sh --verify

# Тест проверки работоспособности (только чтение)
make health-check-verbose
```

**Безопасно:** Только чтение информации и создание бэкапа.

### Шаг 4: Интерактивный тест (10 минут)

```bash
make deploy-safe-interactive
```

Отвечайте **"n" (нет)** на все запросы, чтобы увидеть процесс без изменений.

**Безопасно:** Если отвечать "нет" - никаких изменений не будет.

## Что тестировать в первую очередь

### ✅ Безопасно (можно делать на production)

1. **Автоматическая проверка**
   ```bash
   make test-deploy
   ```

2. **Dry-run режим**
   ```bash
   make deploy-safe-dry
   ```

3. **Проверка работоспособности**
   ```bash
   make health-check
   ```

4. **Тест бэкапа**
   ```bash
   ./scripts/backup_db.sh --verify
   ```

### ⚠️ Требует осторожности

1. **Интерактивный режим** - отвечайте "нет" на все запросы
2. **Тест восстановления** - только если готовы восстановить БД

### ❌ НЕ тестируйте на production без подготовки

1. Реальный деплой без dry-run
2. Восстановление БД без бэкапа
3. Откат без понимания последствий

## Быстрая проверка перед первым использованием

```bash
# 1. Автоматическая проверка (30 сек)
make test-deploy

# 2. Dry-run (1 мин)
make deploy-safe-dry

# 3. Проверка работоспособности (30 сек)
make health-check

# Если все прошло успешно - можно использовать!
```

## Полная инструкция

Для детального плана тестирования см. [TESTING_DEPLOY_SCRIPTS.md](TESTING_DEPLOY_SCRIPTS.md)

---

**Совет:** Начните с `make test-deploy` - это самый безопасный способ проверить, что все работает!
